TopoDroid README

Welcome to TopoDroid: DistoX on Android !

2011-12-16
marco corvi <marco.corvi@gmail.com>

------------------------------------------------------------------
VERSION

This is TopoDroid version 0.3.
It will not work with databases, generated by previous versions.

------------------------------------------------------------------
DISCLAIMER

This code is provided under GPL v.2 licence.
It as provided as it is, with no guarantee.
I do NOT take resoponsability for any loss of your data.

This software is VERY experimental and unstable.
If you plan to use it for a real cave survey,
you should be ready to use TopoLinux command line tools
to recover your data, in case something goes wrong.
I repeat: I do NOT take resoponsability for any loss
of your data.

This software is distributed under GPL v.2 licence.
See the file COPYING for details

------------------------------------------------------------------
INSTALL

You need an android sdk to compile and install the package.
TopoDroid requires bluetooth, and cannot run on a droid emulator.
You need a real device.
Edit the AndroidMakefile.xml to suit your device.
Then compile and install
   $ ant debug
   # adb install -r bin/DistoX-debug.apk

  NOTE: You need to turn on two setings on your Android:
     - development debug
     - install from third parties

If you do not create the directory /mnt/sdcard/TopoDroid
TopoDroid will create an empty database and all
the subdirectories for the data files on the first run.
   # adb shell
   > cd /mnt/sdcard
   > mkdir TopoDroid
   > cd TopoDroid
   > mkdir tlx th th2
   > exit

  NOTE: if no working survey is provided, TopoDroid starts with
  an empty screen. You must select a survey, or create a new one,
  before you connect TopoDroid to the DistoX, so that the data
  transferred from the DistoX are assigned to the selected survey.
  The same applies for calibration data: you need to select or create
  a new calibration in advance. 

------------------------------------------------------------------
SAMPLE DATA

Sample data to play with are not provided. Sorry.

------------------------------------------------------------------
HOWTO

When you start TopoDroid you are presented with an empty screen.
Tap the "MENU" to bring up the options:
  - Devices
  - Surveys
  - Scraps
  - Calibs
  - Refresh
  - Options

With the first, "Devices", you can scan for DistoX devices, or simply
list paired devices (a device is paired after you connect to it once).
When you tap on a device in the list, you have a choice of actions:
  - Connect: if the device is NOT CONNECTED, tries to connect to it
  - Reconnect: tries to connect to the device
  - Disconnect: if the device is CONNECTED, close the connection
  - Toggle calib mode on and off
  - Read the calibration stored in the device
  - Read the head/tail of the data queue inside the device
  - Write calibration to device (only if a calibrationis loaded):
The last four actions work only when the device is NOT CONNECTED.

With the "Surveys" option you can list the surveys, and check whether to
display splay shots and centerline shot as groups or individual shots
(these last two options are not implemented as of 2011-07-25).
When you tap on the survey name in the list, the survey dialog is brought
up: you can edit the survey name (effectively creating a new survey with
the new name), or select the survey for display. The shots of the selected
survey are displayed as
   id <name> distance compass clino
The "name" is composed of the "from" and the "to" stations.
One of the two is empty if the shot is a splay one.
Both stations are missing if the shot has not been "named" yet.
Initially the shot names are empty.
To assign station(s) to the shot tap on it and edit the name in the dialog.
In the shot dialog you can enter also a comment for the shot, as well as
flags (whether it is duplicate, and the extend direction).

The "Scraps" menu list the scraps of the current survey.
By clicking on a scrap name the app goes into plot-drawing activity.
The drawing displays the centerline, the splay shots and an underlying
1-meter grid. These can be toggled off with the "Mode" menu of the
drawing activity.
The bottons at the top allow to
  - toggle between moving the scrap around the canvas and drawing on it
  - zoom in/out
  - select the point symbol
  - select the line type
  - undo, ie, erase the last drawn item
There is a "Redo" menu to put back erased items.
Another menu saves the drawing (in therion format).
IMPORTANT: you lose all your work if you leave the drawing activity
without saving it first.
The drawing can also be exported as PNG image.

With the "Calibs" option you manage calibrations. As for surveys you can
select the name of the current calibration. Once a calibration is selected
its data are diosplayed in the list as
   id <group> compass clino roll error
The group is used to define groups of data with the same direction: to assign
the group tap on the data line and edit the group name in the dialog.
The groups can be guessed with a menu in the "Calibs" option.
The calibration is computed with another menu in the "Calibs" option:
the calibration result is displayed, together with the average error,
and other infos. After the calibration has been computed it can be written
to the DistoX device.

Finally tap the "Refresh" option to refresh the lists.
When TopoDroid is connected to a DistoX it download the data as they come
and stores them in the DB, but the list is not automatically refreshed.

The "Options" menu displays the current options and allows to change their
values.

