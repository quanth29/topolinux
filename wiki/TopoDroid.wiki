#summary DistoX on android

== DISCLAIMER ==

This code is provided under GPL v.2 licence.
It as provided as it is, with no guarantee.
I do NOT take resoponsability for any loss of your data.

This software is VERY experimental and unstable.
If you plan to use it for a real cave survey,
you should be ready to use TopoLinux command line tools
to recover your data, in case something goes wrong.
I repeat: I do NOT take resoponsability for any loss
of your data.

== IMPORTANT NOTICE ==

_From Nov. 15, 2011, TopoDroid use a new database,_ "distox2.db".
_Your data in the old database,_ "distox.db", _cannot be used by
the current version of TopoDroid._

_To use the data from previous databases with the current version
of TopoDroid
they must be converted to the current database format.
This can be done by exporting the data to a file, suitably modifying the file
(eg, with PERL), and loading it in the new database._

== COMPILE and INSTALL ==

To install the compiled app on a device, copy (or download) the latest apk on the
sdcard.

To compile the package you need an android SDK.
Edit the AndroidMakefile.xml to suit your device.
Then compile and install
{{{
   $ ant debug
   # adb install -r bin/DistoX-debug.apk
}}}

TopoDroid requires bluetooth, and cannot run on a droid emulator.
You need a real device.

TopoDroid creates the directory /mnt/sdcard/TopoDroid, some subdirectories,
and an empty database on the first run. Your data will be saved here
and will not be erased even if you uninstall the app. This means that you
should download the data to your PC now and then, and clean the database
(using SQLite).

== HOWTO == 

When you start TopoDroid the first time you are presented with a greeting screen.
This will not show again unless there is no survey to display.
If there is a survey TopoDroid opnes up listing the survey shots.

Tap the "MENU" to bring up the options:
  * DistoX
  * Surveys
  * Scraps
  * Download
  * Notes
  * More

With the first option, *DistoX*, you can scan for DistoX devices, or simply
list paired devices (a device is paired after you connect to it once).
When you tap on a device in the list, you have a choice of actions:
  * Connect: if the device is NOT CONNECTED, tries to connect to it
  * Reconnect: tries to connect to the device
  * Disconnect: if the device is CONNECTED, close the connection
  * Reset the connection
  * Toggle calib mode: use when the device is NOT CONNECTED
  * Write calibration to device (only if a calibrationis loaded): use when the device is NOT CONNECTED.
When a DistoX is connected the downloaded data go into the active survey or the active calibration depending on the type of the data.
The last-used DistoX device is also listed in the menu options so that you can go immediately to manage it.

With the *Surveys* menu option you can manage the shot list display,
export the survey as Therion th file, define a new scrap for the survey,
list the surveys, define a new survey.
When you tap on the survey name in the list of surveys, the survey becomes the active survey and its shots are displayed. When you define a new survey, you must
specify its name in the survey dialog; it becomes the active survey. Initially it has no shot; the shot list is empty. Connect to the DistoX to download the data
that go in the shot list. The shots of the selected
survey are displayed as
{{{
   id <name> distance compass clino [extend]
}}}

The "name" is an alphanumeric string WITH NO SPACES: for a centerline
shot the two stations are joined by a dash '-', eg, "13-14".
For a splay shot the name is the station followed by a dash, eg, "13-".
Initially the shot names are empty (only the dash "-").
To assign a name to the shot tap on it and edit the stations in the dialog.

The extend is one of '<' (left), '>' (right) or '|' vertical (enclosed in square brackets). The shot extend can be changed in the edit dialog.

An asterisk "`*`" follows the _extend_ if the shot is marked as "duplicate".
The duplicate flag can be toggled in the shot edit dialog.

By tapping on the shot line you bring up the shot edit dialog, throgh which you can
edit the shot stations and select its extend, toggle the duplicate flag, and
add a comment to the shot.

With "Scraps" you can list the scraps of the current survey.
On a scrap you can draw lines and points (speleo symbols). These are the analogue of the Therion lines and points. Currently only a few line and point types are supported. 

Available point typesi (Nov. 2011):
  * air-draught (orientable)
  * anchor
  * blocks
  * clay
  * continuation
  * danger
  * debris
  * entrance (orientable)
  * flowstone
  * gradient (orientable)
  * ice
  * label (with text)
  * popcorn
  * sand
  * stal: either stalactite or stalagmite (if rotated by 180 degrees)
  * water
  * water-flow (orientable)

Available line types (Nov. 2011):
  * wall (red)
  * pit (pink)
  * chimney (dark pink)
  * arrow (white)
  * rock-border (gray)
  * border (green)

The buttons on the drawing canvas allow to
  * toggle between moving the canvas or drawing on it
  * undo the last drawn object
  * zoom in/out
  * select the point symbol
  * select the line type
Additionally there are the menus
  * redo
  * save the plot (scrap) as therion th2 file
  * export the plot as PNG image
  * toggle display mode
  * stats
  * delete

With the "Calibs" option you manage calibrations. As for surveys you can
select the name of the current calibration. Once a calibration is selected
its data are displayed in the list as
{{{
   id <group> compass clino roll error
}}}
The group is used to define groups of data with the same direction: to assign
the group tap on the data line and edit the group name in the dialog.
The groups can be guessed with a menu in the "Calibs" option.
The calibration is computed with another menu in the "Calibs" option:
the calibration result is displayed, together with the average error,
and other infos. After the calibration has been computed it can be written
to the DistoX device.

Finally tap the "Refresh" option to refresh the lists.
When TopoDroid is connected to a DistoX it download the data as they come
and stores them in the DB, but the list is not automatically refreshed.

The "Options" option allows to set some TopoDroid configuration options
and save them.
  * tolerance among centerline data to define a single shot
  * calibration minimum error
  * calibration maximum number of iterations
  * tolerance among calibration data to belong to the same group

== FURTHER DOCS ==

[TopoDroidTips TopoDroid Tips]

[TopoDroidFAQ TopoDroid FAQ]

[TopoDroidTroubleshooting TopoDroid Troubleshooting]

[TopoDroidDevices TopoDroid Working devices]

[TopoDroidDB TopoDroid DB]

The PDF docs in the download section.

== BUGS REPORT ==

If you have a crash or the app does not work as expected, please send me
a logcat-dump. To generate a logcat-dump, connect a desktop with Android SDK
to yout device and run "adb logcat | grep DistoX".


If you discover a bug or a problem please file an issue on this site.

If you have comments and suggestions feel free to drop me an email: 
marco dot corvi at gmail dot com